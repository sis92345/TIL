# Eventual Consistency

**Eventual Consistency**은 분산 시스템 및 마이크로서비스 아키텍처와 자주 연관되는 개념입니다. 그러나 이 용어 자체가 종종 오해되어, 특히 강력한 일관성이 필요한 시스템에서 그 진정한 의미를 혼동하는 경우가 많습니다. 본 아티클은 이벤트적 일관성의 복잡성을 밝히고, 이벤트적 일관성, 시간 지연, 그리고 강력한 일관성의 차이점을 강조하는 것을 목표로 합니다. 또한 트랜잭션 시스템, 특히 마이크로서비스 환경에서 이벤트적 일관성을 적용하는 데 따르는 실질적인 어려움을 살펴봅니다.

# **소개**

**Eventual Consistency은 분산 시스템이 일시적으로 불일치 상태를 유지하도록 허용하지만, 결국에는 일관된 상태로 수렴될 것을 보장하는 모델입니다.** 모든 읽기가 가장 최근의 쓰기를 반영하도록 보장하는 강력한 일관성과 달리, 최종 일관성은 더 높은 가용성과 분할 허용성을 제공하는 대신 불일치를 허용합니다. 이 모델은 소셜 미디어 피드나 분산 캐시와 같은 특정 사용 사례에는 적합하지만, 금융 및 ERP 시스템과 같이 트랜잭션 무결성이 필요한 시스템에서는 상당한 어려움을 야기합니다.

별도의 데이터베이스를 사용하여 독립적으로 배포 가능한 서비스를 지향하는 마이크로서비스 아키텍처는 종종 시스템 복원력과 확장성을 위한 절충안으로 **Eventual Consistency**을 채택합니다. 그러나 마이크로서비스가 중앙 집중식 데이터베이스를 공유하여 순수한 마이크로서비스 철학에서 벗어난 하이브리드 모델을 만들면 혼란이 발생합니다. 본 논문에서는 이러한 시나리오에서 최종 일관성이 어떻게 적용되는지 살펴보고, 최종 일관성이 적절한 시점과 장소를 파악하기 위한 프레임워크를 제시합니다.

# **일관성 모델 정의**

# **Strong Consistency**

강력한 일관성은 모든 읽기 작업이 가장 최근의 쓰기 작업을 반영하도록 보장합니다. 이 모델은 금융 거래 및 재고 관리 시스템과 같이 데이터 정확성과 무결성이 타협 불가능한 시스템에서 매우 중요합니다.

# **Eventual Consistency**

**Eventual Consistency System**에서는 데이터 복제본이 일시적으로 분산될 수 있지만 결국에는 수렴됩니다. 이러한 접근 방식은 데이터 일관성이 지연되더라도 운영을 계속하는 것이 우선인 고가용성 시스템에서 일반적으로 사용됩니다.

# **Time Lag vs Eventual Consistency**

Time Lag이 발생하는 시스템과 **Eventual Consistency**을 유지하는 시스템 간에는 중요한 차이가 있습니다. Time lag은 데이터 전파 지연을 의미하며, 모든 시스템이 쓰기 순서 측면에서 일관성을 유지하지만 오래된 데이터를 표시할 수 있습니다. 이와 대조적으로 **Eventual Consistency**은 읽기 및 쓰기 작업 모두에서 일시적인 불일치를 허용하며, 이러한 불일치를 해결하기 위해 애플리케이션 수준의 메커니즘이 필요합니다.

# **마이크로서비스에서 이벤트적 일관성의 역할**

마이크로서비스 아키텍처는 독립적인 확장성과 복원력을 확보하기 위해 종종 이벤트적 일관성(eventual consistency)을 강조합니다. 그러나 이 모델은 원자성, 일관성, 격리성, 내구성(ACID)이 요구되는 트랜잭션 시스템에서 심각한 문제를 야기할 수 있습니다. 이벤트적 일관성이 데이터 무결성 문제로 이어질 수 있는 시나리오를 살펴보고 이러한 위험을 완화하기 위한 전략을 제시합니다.

# **하이브리드 모델: 마이크로서비스가 중앙 데이터베이스를 공유하는 경우**

기존의 마이크로서비스 아키텍처는 독립적인 데이터베이스를 지향하지만, 실제 구현 환경에서는 운영 효율성을 위해 공유 데이터베이스를 사용하는 경우가 많습니다. 이는 서비스가 컨테이너화되고 독립적으로 배포되지만 단일 데이터 소스를 공유하는 하이브리드 모델을 형성합니다. 이러한 접근 방식의 함의와 마이크로서비스 정의에 진정으로 부합하는지 분석해 보겠습니다.

# **실제적 의미와 모범 사례**

재무 시스템과 같은 일부 시스템은 종종 운영 데이터와 실시간 동기화가 필요하지 않아 다운스트림 프로세스에서 최종 일관성을 유지할 수 있는 반면, ERP의 경우 재고, 판매 또는 배송과 같은 데이터 상태가 특정 지점에서 동기화되어야 합니다.

# **결론**

**Eventual Consistency은 적절하게 사용하면 강력한 모델이지만, 잘못 이해하면 심각한 문제를 야기할 수 있습니다.** 본 논문은 이벤트적 일관성의 경계와 사용 사례를 명확하게 정의함으로써 실무자들이 아키텍처 및 시스템 설계에 대해 정보에 입각한 결정을 내릴 수 있도록 돕는 프레임워크를 제공하고자 했습니다. 마이크로서비스나 이벤트적 일관성을 부정하는 것이 아니라, 개념의 복잡성을 밝히고 분산 시스템에서의 적용에 대한 균형 잡힌 관점을 제시하는 것이 목표입니다.