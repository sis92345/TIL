# 02. AWS 계정 SSH Key 등록 및 EC2 접속 방법

날짜: 2022년 10월 23일
유형: Devops
작성자: 익명
태그: AWS

# 1. AWS SSH KEY 등록

1. 네트워크 및 보안 > 키 페어 > 키 페어 생성 > 다운 받은 `.pem` 파일은 보관
    - 메뉴
        
        ![Untitled](02%20AWS%20%E1%84%80%E1%85%A8%E1%84%8C%E1%85%A5%E1%86%BC%20SSH%20Key%20%E1%84%83%E1%85%B3%E1%86%BC%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%86%E1%85%B5%E1%86%BE%20EC2%20%E1%84%8C%E1%85%A5%E1%86%B8%E1%84%89%E1%85%A9%E1%86%A8%20%E1%84%87%E1%85%A1%E1%86%BC%E1%84%87%E1%85%A5%E1%86%B8%20013d3c8551f84e0ba44717872bc1b22e/Untitled.png)
        
    - 키 페어 : SSH Key는 비 대칭 키로, 개인키와 공개키가 있다.
        - 접속자 : 개인키를 소유
        - 공개키 : EC2 머신에 설치가 된다.

# 2. EC2 머신 생성

1. EC2 대시보드 > 인스턴스 생성
2. 인스턴스 유형 설정
    - 인스턴스 유형은 가상 서버의 CPU, 메모리, 스토리지 및 네트워크 조합의 조합을 말한다.
    - 프리티어는 `t2.mirco`를 사용할 수 있다.
3. 네트워크 설정
    - 퍼블릭 IP 자동 할당 허용 : EC2 머신 접근을 위함
4. 보안 그룹 설정
    - 모든 IP 허용 : `0.0.0.0`
        - **실무에서는 사용하면 안된다.**
    - 포트 범위 : `22` ( SSH )
    
    ![Untitled](02%20AWS%20%E1%84%80%E1%85%A8%E1%84%8C%E1%85%A5%E1%86%BC%20SSH%20Key%20%E1%84%83%E1%85%B3%E1%86%BC%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%86%E1%85%B5%E1%86%BE%20EC2%20%E1%84%8C%E1%85%A5%E1%86%B8%E1%84%89%E1%85%A9%E1%86%A8%20%E1%84%87%E1%85%A1%E1%86%BC%E1%84%87%E1%85%A5%E1%86%B8%20013d3c8551f84e0ba44717872bc1b22e/Untitled%201.png)
    
    - 보안 그룹 설명
        
        보안 그룹은 인스턴스에서 송수신되는 트래픽을 제어하는 방화벽 규칙 세트입니다. 인바운드 규칙은 인스턴스로 들어오는 수신 트래픽을 제어하고 아웃바운드 규칙은 인스턴스에서 나가는 발신 트래픽을 제어합니다. 인스턴스에 하나 이상의 보안 그룹을 할당할 수 있습니다. 여러 보안 그룹을 할당하면 모든 규칙이 평가되어 인바운드 및 아웃바운드 트래픽을 제어합니다. 값을 지정하지 않으면 원본 템플릿의 값이 계속 사용됩니다. 템플릿 값을 지정하지 않으면 기본 API 값이 사용됩니다.
        
5. 키페어 설정
    - 이전에 생성한 키페어로 설정

# 3. EC2 머신 접속

- SSH 명령어 `ssh -i {YOUR_KEY_PAIR_FILE.pem} {USER_NAME}@{AWS_PUBLIC_DNS_}`
    - 예 : `ssh -i ./privateKey.pem es2-user@{public-ipv4-address}`

AWS의 OS에 따른 Default User는 아래와 같다.

![Untitled](02%20AWS%20%E1%84%80%E1%85%A8%E1%84%8C%E1%85%A5%E1%86%BC%20SSH%20Key%20%E1%84%83%E1%85%B3%E1%86%BC%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%86%E1%85%B5%E1%86%BE%20EC2%20%E1%84%8C%E1%85%A5%E1%86%B8%E1%84%89%E1%85%A9%E1%86%A8%20%E1%84%87%E1%85%A1%E1%86%BC%E1%84%87%E1%85%A5%E1%86%B8%20013d3c8551f84e0ba44717872bc1b22e/Untitled%202.png)

나는 Amazon Linux ( AMI )를 사용중이므로 기본 유저는 `es2-user` 이다.

- 참고
    
    [Manage user accounts on your Linux instance](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/managing-users.html#ami-default-user-names)
    

# 4. EC2 머신 종료

- 인스턴스 > 인스턴스 상태 > 인스턴스 종료

![Untitled](02%20AWS%20%E1%84%80%E1%85%A8%E1%84%8C%E1%85%A5%E1%86%BC%20SSH%20Key%20%E1%84%83%E1%85%B3%E1%86%BC%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%86%E1%85%B5%E1%86%BE%20EC2%20%E1%84%8C%E1%85%A5%E1%86%B8%E1%84%89%E1%85%A9%E1%86%A8%20%E1%84%87%E1%85%A1%E1%86%BC%E1%84%87%E1%85%A5%E1%86%B8%20013d3c8551f84e0ba44717872bc1b22e/Untitled%203.png)