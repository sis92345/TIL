# 1. VPC ( Amazon Virtual Private Cloud )

<aside>
ğŸ½ï¸ VPCë¥¼ ì‚¬ìš©í•˜ë©´ ì •ì˜ëœ ê°€ìƒ ë„¤íŠ¸ì›Œí¬ë¡œ AWS ë¦¬ì†ŒìŠ¤ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆë‹¤. 
ì´ ê°€ìƒ ë„¤íŠ¸ì›Œí¬ëŠ” AWSì˜ í™•ì¥ ê°€ëŠ¥í•œ ì¸í”„ë¼ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì´ì ê³¼ í•¨ê»˜ ê¸°ì¡´ ë„¤íŠ¸ì›Œí¬ì™€ ìœ ì‚¬í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.

</aside>

## 1-2. VPC íŠ¹ì§•

- ê³„ì • ìƒì„±ì‹œ default VPCë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
- EC2, RDS, S3 ë“±ì˜ ì„œë¹„ìŠ¤ë¡œ í™œìš© ê°€ëŠ¥í•˜ë‹¤
- ì„œë¸Œë„· êµ¬ì„±
- ë³´ì•ˆ ì„¤ì • ( IP Block , Inbound/outbound ì„¤ì • )
- VPC Peering ( VPC ê°„ì˜ ì—°ê²° )
- IP ëŒ€ì—­ ì§€ì • ê°€ëŠ¥
- VPCëŠ” í•˜ë‚˜ì˜ Regionì—ë§Œ ì†í•  ìˆ˜ ìˆìŒ

## 1-2. VPCì˜ êµ¬ì„±

- VPC
    - Avaliablity Zone
    - Subnet(CIDR)
    - Internet Gateway: VPCì˜ Subnetê³¼ ì¸í„°ë„·ì˜ ë„¤íŠ¸ì›Œí‚¹ ë‹´ë‹¹
    - Network Access Control List(NACL) / Security Group : ë³´ì•ˆ ë‹´ë‹¹
    - RouteTable : VPC ê°ì²´ë“¤ ê°„, VPCì™€ ì™¸ë¶€ê°„ì˜ ë„¤íŠ¸ì›Œí¬ë¥¼ ìœ„í•œ í…Œì´ë¸”
    - NAT(Network Address Translation) instance/NAT Gateway
    - VPC endpoint

![https://velog.velcdn.com/images%2Fdoohyunlm%2Fpost%2F120de141-747e-4d6f-82c5-817f4b2f1142%2FVPC%20%EA%B0%9C%EB%85%90(4).png](https://velog.velcdn.com/images%2Fdoohyunlm%2Fpost%2F120de141-747e-4d6f-82c5-817f4b2f1142%2FVPC%20%EA%B0%9C%EB%85%90(4).png)

ë”°ë¼ì„œ VPCì˜ êµ¬ì„±ì€ Regionë³„ ì•„ë˜ì™€ ê°™ë‹¤

- Region
    - VPC
        - Avaliable Zone
            - VPC Subnet (Public)
            - VPC Subnet  (Private)
        - Avaliable Zone
            - VPC Subnet

VPC ë‚´ë¶€ëŠ”..

VPC

- Internet Gateway
    - Router
        - Route Table
            - NACL
                - VPC Subnet

# 2. Avaliable Zone

Avaliable Zoneì€ ë¬¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆëŠ” ì¸í”„ë¼ê°€ ëª¨ì—¬ ìˆëŠ” ë°ì´í„° ì„¼í„°ì´ë‹¤. í•˜ë‚˜ì˜ ë¦¬ì „ì€ 2ê°œ ì´ìƒì˜ Avaliable Zoneìœ¼ë¡œ êµ¬ì„±ëœë‹¤(ìì—°ì¬í•´ë‚˜ ë°ì´í„° ì„¼í„°ì˜ ì‚¬ê³  ëŒ€ë¹„)

![https://onica2019.wpenginepowered.com/wp-content/uploads/2016/04/AWS-Global-Infrastructure-700x420.jpg](https://onica2019.wpenginepowered.com/wp-content/uploads/2016/04/AWS-Global-Infrastructure-700x420.jpg)

# 3. Subnet

VPCì˜ í•˜ìœ„ ë‹¨ìœ„ë¡œ í•˜ë‚˜ì˜ Avaliable Zoneì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‚˜ í•˜ë‚˜ì˜ Avaliable Zoneì—ì„œëŠ” ì—¬ëŸ¬ê°œì˜ Subnetì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

## 3-1. Subnetì˜ êµ¬ë¶„

- Private Subnet
    - ì¸í„°ë„·ì— ì ‘ê·¼ ë¶ˆê°€ëŠ¥í•œ subnet. ì •í™•íˆëŠ” IGWë¡œ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•œ ê²ƒ
    - íŒ¨í‚¤ì§€ ì„¤ì¹˜ë‚˜ ì—…ë°ì´íŠ¸ ë“± ì¸í„°ë„· ì—°ê²°ì´ í•„ìš”í•œ ê²½ìš°ê°€ ìˆë‹¤. ì´ë•ŒëŠ” Public Subnetì„ í†µí•´ ìš°íšŒì ‘ê·¼í•´ì„œ ì‚¬ìš©í•œë‹¤.
- Public Subnet
    - ì¸í„°ë„·ì— ì ‘ê·¼ ê°€ëŠ¥í•œ Subnet
- CIDR ë¸”ë¡ì„ í†µí•´ Subnet êµ¬ë¶„
    - CIDR : í•˜ë‚˜ì˜ VPC ë‚´ì— ìˆëŠ” ì—¬ëŸ¬ IP ì£¼ì†Œë¥¼ ê°ê°ì˜ Subnetìœ¼ë¡œ ë¶„ë¦¬/ë¶„ë°°í•˜ëŠ” ì‘ì—…
    - [1-2. ì„œë¸Œë„· (Sub Network)](https://www.notion.so/1-2-Sub-Network-498c711dc63949fd8bf9f2467054265b) ì°¸ê³ 

# 4. Internet gateway (IGW)

<aside>
ğŸŒ **ì¸í„°ë„·ìœ¼ë¡œ ë‚˜ê°€ëŠ” í†µë¡œ, VPC ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ì™€ VPC ì™¸ë¶€ì˜ ë„¤íŠ¸ì›Œí‚¹ì„ ì—°ê²°í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤**

</aside>

Private Subnetì€ IGMìœ¼ë¡œ ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šë‹¤

# 5. Route Table

<aside>
ğŸŒ **íŠ¸ë ˆí”½ì´ ì–´ë””ë¡œ ê°€ì•¼í• ì§€ ì•Œë ¤ì£¼ëŠ” í…Œì´ë¸”**

</aside>

VPC ìƒì„±ì‹œ ìë™ìœ¼ë¡œ ìƒì„±ëœë‹¤.

- 10.0.0.0/16(10.0.0.0~10.0.255.255) â†’ local
- ë‚˜ë¨¸ì§€ ìš”ì²­ì€ IGM (ì¸í„°ë„·)

ì˜ˆë¥¼ë“¤ì–´ VPC ë‚´ë¶€ì—ì„œ ìš”ì²­ì„ ë³´ëƒˆëŠ”ë° 211.~~~ ì´ë¼ë©´ IGWë¡œ ìš”ì²­, ê·¸ê²Œ ì•„ë‹ˆë¼ë©´ ë‚´ë¶€ VPC Subnetìœ¼ë¡œ ìš”ì²­,

ì¦‰ **Private Subnetì€ Route Tableì— IGWë¡œ ê°€ëŠ” ì •ë³´ê°€ ì—†ëŠ” ê²ƒ**

# 6. NACL(Network Access Control List) , Security Group

ë³´ì•ˆ ì—­í• , NACL â†’ Stateless, SG â†’ StateFul

Access Blockì€ NACLì—ì„œë§Œ ê°€ëŠ¥

# 7. Private Subnetì—ì„œ ì¸í„°ë„·ìœ¼ë¡œ ìš”ì²­í•˜ê±°ë‚˜ ì ‘ê·¼í•˜ëŠ” ë°©ë²•

## 7-1. NAT (Network Address Translation) instance/gateway

Private Subnet â†’ Internet

<aside>
ğŸŒ **Private Subnetì— ì— ìˆëŠ” private instanceê°€ ì™¸ë¶€ì˜ ì¸í„°ë„·ê³¼ í†µì‹ í•˜ê¸° ìœ„í•œ ì„œë¹„ìŠ¤**ë¡œ ì•„ë˜ ë‘ê°€ì§€ ë°©ë²•ì„ ì‚¬ìš©
1. Public Subnetì˜ EC2 Instanceë¥¼ ì´ìš©í•˜ëŠ” NAT Instance
2. AWSê°€ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ëŠ” NAT Gateway

</aside>

Private ì„œë²„ì—ì„œ ì¸í„°ë„· ì ‘ê·¼ì´ í•„ìš”í•  ë•Œ Public Subnetì˜ NAT ê°ì²´ë¥¼ í†µí•´ì„œ ì—°ê²°ì„ ìš°íšŒí•œë‹¤. ì´ ë°©ë²•ì—ëŠ” NAT instanceì™€ gateway ë‘ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤.

1. NAT instance
    - Public Subnetì— ì˜¬ë ¤ì ¸ ìˆëŠ” EC2 Instance
2. NAT gateway
    - ìœ„ ëª©ì  ì „ìš©ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ AWSì—ì„œ ì ‘ê·¼í•˜ëŠ” ì„œë¹„ìŠ¤

ì •í™•í•œ ì ‘ê·¼ì€

private subnet request â†’ router â†’ ( route table â†’ nacl ) â†’ public subnet nat instance â†’ route â†’ igw â†’ â€¦.

## 7-2. Bastion Host

Internet â†’ Private Subnet

<aside>
ğŸŒ Private Subnet Instanceë¡œ ì ‘ê·¼í•˜ê¸° ìœ„í•œ ìˆ˜ë‹¨ìœ¼ë¡œ Public subnet ë‚´ì— ìœ„ì¹˜í•˜ëŠ” EC2

</aside>

NAT ì‚¬ë¡€ì™€ ë°˜ëŒ€ë¡œ ì™¸ë¶€ì—ì„œ Private Subnet Instanceë¥¼ ì¡°ì‘í•˜ê¸° ìœ„í•œ ë°©ë²•, ì¦‰ internet â†’ Private Subnet

NATì™€ ë˜‘ê°™ì´ Public Subnetìœ¼ë¡œ ì ‘ê·¼í•œ í›„ Public Subnetì˜ Bastion Hostë¡œ ì ‘ê·¼í•œ í›„ Private Subnetì„ ì ‘ê·¼í•œë‹¤.

# 8. VPC endpoint

VPC ì—”íŠ¸í¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ IGW, NAT ë””ë°”ì´ìŠ¤, VPN ì—°ê²° ë° AWS Direct Connectë¥¼ í•„ìš”ë¡œ í•˜ì§€ ì•Šê³  AWS Private Link êµ¬ë™ ì§€ì› AWS ì„œë¹„ìŠ¤ ë° **VPC ì—”ë“œí¬ì¸íŠ¸ ì„œë¹„ìŠ¤ì— ë¹„ê³µê°œë¡œ ì—°ê²°**í•  ìˆ˜ ìˆë‹¤. VPCì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” **ì„œë¹„ìŠ¤ì˜ ë¦¬ì†ŒìŠ¤ì™€ í†µì‹ í•˜ëŠ”ë° í¼ë¸”ë¦­ IP ì£¼ì†Œë¥¼ í•„ìš”ë¡œ í•˜ì§€ ì•ŠëŠ”ë‹¤.**

<aside>
ğŸŒ AWSì˜ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë“¤ê³¼ VPCë¥¼ ì—°ê²°í•´ì£¼ëŠ” ì¤‘ê°„ ë§¤ê°œì²´
AWSì—ì„œ VPC ë°–ì—ì„œ íŠ¸ë˜í”½ì´ ë‚˜ê°€ì§€ ì•Šê³  AWSì˜ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê²Œë” ë§Œë“¤ì–´ì£¼ëŠ” ì„œë¹„ìŠ¤
Private Subnetì˜ ê²½ìš° ê²©ë¦¬ëœ ê³µê°„ì¸ë° ê·¸ ìƒí™©ì—ì„œë„ AWSì˜ ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ ì—°ê²°ì„ ì§€ì›í•˜ëŠ” ì„œë¹„ìŠ¤

</aside>

- Interface Endpoint : Private IPë¥¼ ë§Œë“¤ì–´ ì„œë¹„ìŠ¤ë¡œ ì—°ê²°í•´ì¤Œ
    - Private Subnetì—ì„œ IPë¥¼ í• ë‹¹ë°›ì•„ ì—°ê²°
- Gateway Endpoint : ë¼ìš°íŒ… í…Œì´ë¸”ì—ì„œ ê²½ë¡œì˜ ëŒ€ìƒìœ¼ë¡œ ì§€ì •í•´ì„œ ì‚¬ìš©
    - DB ì ‘ê·¼ì„ Route Tableì—ì„œ Gateway Endpointë¡œ ì ‘ê·¼, GatewayEndpointì—ì„œ ì™¸ë¶€ DB ì ‘ê·¼