## 페이징 처리

### 1. 페이징 공식

- **페이징을 처리하기 위해 다음과 같은 종류가 필요하다.**

  1. 전체 게시물 개수

     - 전체 페이지 갯수를 알아내기 위함
     - totalBbs

  2. 전체 페이지 갯수

     - 전체 페이지 갯수 

     - totalPage

  3. 한 페이지에 보여줄 게시물 수
     - countList

  4. 한 화면에서 보여줄 페이지의 수
     - countPage

  5. 현재 페이지 번호
     - page

  

- **전체 게시글 갯수**

  - JDBC로 게시판 테이블의 데이터 수를 읽어와서 처리한다.

- **<u>전체 페이지 갯수/한 화면에 보여줄 페이지의 수 **

- **전체 페이지 갯수(totalPage)**

  - 만약 게시글이 255개이고 하나의 화면에 10개의 글을 처리한다면 26개의 페이지가 필요하다. 
  - 따라서 필요한 전체 페이지의 갯수는 <u>전체 페이지 갯수/한 화면에 보여줄 페이지의 수 + 1이다.</u>이다.
  - 하지만 만약 한 화면에서 보여줄 페이지의 수를 전체 페이지의 갯수로 나누었을때 나머지가 0이다. 이때  +1하면 
    - 위의 공식에 따라.... 255개의 게시물을 한 화면에서 5개의 페이지로 표현하고 싶다면 필요한 페이지는 51페이지이다.  즉 +1을 할 이유가 없다. 
  - 따라서 전체 페이지 갯수를 구하기 위해서는 **<u>나머지가 0이라면 전체 페이지 갯수/한 화면에 보여줄 페이지의 수 + 0</u>**, **<u>나머지가 1이라면 전체 페이지 갯수/한 화면에 보여줄 페이지의 수 + 1</u>**

- **현재 보여주는페이지의 시작페이지 번호와 끝 페이지 번호 구하기**

  - 만약 현재 page가 22번이라면 다음과 같은 시작 페이지와 끝 페이지 번호가 나타나야한다.

    - startPage = 21
    - endPage = 30

  - 시작 페이지 구하기

    - 공식: **startPage = ((page - 1) / countPage) * countPage + 1**
      - 간단하다. 현재 페이지를 내가 한 화면에서 보여주고 싶은 페이지와 나누면 된다.
        - 예: page = 32, countPage = 10
          - (32  - 1) / 10 * 10 + 1
      - (page - 1) / countPage): 현재 페이지의 번호가 pageCount의 번호와 같다면 앞부분이 1이되어 시작 페이지 번호가 엉망이 되는 것을 방지
      - +1: 페이지 시작 번호는 11, 21, 31....으로 시작

  - 끝 페이지 번호 구하기

    - 공식: startPage + countPage - 1

    - 단 페이지의 이 공식을 마지막 페이지에서 계산하면 마지막 페이지에서 보여줘야할 번호보다 오버해서 보여주므로 다음과 같이 처리해야한다.

      ```java
      if (endPage > totalPage) {
          endPage = totalPage;
      }
      
      ```

      